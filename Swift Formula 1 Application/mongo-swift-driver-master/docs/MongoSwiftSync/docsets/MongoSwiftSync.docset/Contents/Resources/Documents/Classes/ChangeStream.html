<!DOCTYPE html>
<html lang="en">
  <head>
    <title>ChangeStream Class Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset="utf-8">
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
    <script src="../js/lunr.min.js" defer></script>
    <script src="../js/typeahead.jquery.js" defer></script>
    <script src="../js/jazzy.search.js" defer></script>
  </head>
  <body>

    <a name="//apple_ref/swift/Class/ChangeStream" class="dashAnchor"></a>

    <a title="ChangeStream Class Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="../index.html">
          MongoSwiftSync 1.0.0-rc0 Docs
        </a>
         (100% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="../search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/mongodb/mongo-swift-driver">
            <img class="header-icon" src="../img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="dash-feed://https%3A%2F%2Fmongodb%2Egithub%2Eio%2Fmongo%2Dswift%2Ddriver%2Fdocs%2FMongoSwiftSync%2Fdocsets%2FMongoSwiftSync%2Exml">
            <img class="header-icon" src="../img/dash.png"/>
            Install in Dash
          </a>
        </p>
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="../index.html">MongoSwiftSync Reference</a>
      <img class="carat" src="../img/carat.png" />
      ChangeStream Class Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Guides.html">Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../bson.html">BSON</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../change-streams.html">Change-Streams</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../development.html">Development</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../error-handling.html">Error-Handling</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../multithreaded-usage.html">Multithreaded-Usage</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/ChangeStream.html">ChangeStream</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/ClientSession.html">ClientSession</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/MongoClient.html">MongoClient</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/MongoCursor.html">MongoCursor</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/MongoCollection.html">MongoCollection</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/MongoDatabase.html">MongoDatabase</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            <h1>ChangeStream</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">ChangeStream</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span> <span class="p">:</span> <span class="kt">CursorProtocol</span> <span class="k">where</span> <span class="kt">T</span> <span class="p">:</span> <span class="kt">Decodable</span><span class="p">,</span> <span class="kt">T</span> <span class="p">:</span> <span class="kt">Encodable</span></code></pre>

                </div>
              </div>
            <p>A MongoDB change stream.</p>
<div class="aside aside-see-also">
    <p class="aside-title">See also</p>
    <a href="https://docs.mongodb.com/manual/changeStreams/">https://docs.mongodb.com/manual/changeStreams/</a>

</div>

          </div>
        </section>

        <section class="section">
          <div class="section-content">
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:14MongoSwiftSync12ChangeStreamC11resumeToken0aB006ResumeG0VSgvp"></a>
                    <a name="//apple_ref/swift/Property/resumeToken" class="dashAnchor"></a>
                    <a class="token" href="#/s:14MongoSwiftSync12ChangeStreamC11resumeToken0aB006ResumeG0VSgvp">resumeToken</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The <code>ResumeToken</code> associated with the most recent event seen by the change stream.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">resumeToken</span><span class="p">:</span> <span class="kt">ResumeToken</span><span class="p">?</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/mongodb/mongo-swift-driver/tree/v1.0.0-rc0/Sources/MongoSwiftSync/ChangeStream.swift#L22-L24">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:14MongoSwiftSync12ChangeStreamC7isAliveSbyF"></a>
                    <a name="//apple_ref/swift/Method/isAlive()" class="dashAnchor"></a>
                    <a class="token" href="#/s:14MongoSwiftSync12ChangeStreamC7isAliveSbyF">isAlive()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Indicates whether this change stream has the potential to return more data.</p>

<p>This change stream will be dead if <code>next</code> returns <code>nil</code> or an error. It will also be dead if <code>tryNext</code> returns
 an error, but will still be alive if <code>tryNext</code> returns <code>nil</code>.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">isAlive</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Bool</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/mongodb/mongo-swift-driver/tree/v1.0.0-rc0/Sources/MongoSwiftSync/ChangeStream.swift#L32-L38">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:14MongoSwiftSync12ChangeStreamC4nexts6ResultOyxs5Error_pGSgyF"></a>
                    <a name="//apple_ref/swift/Method/next()" class="dashAnchor"></a>
                    <a class="token" href="#/s:14MongoSwiftSync12ChangeStreamC4nexts6ResultOyxs5Error_pGSgyF">next()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Get the next <code>T</code> from this change stream.</p>

<p>This method will block until an event is returned from the server, an error occurred, or the change stream is
 killed. Each attempt to retrieve results will wait server-side for a maximum of <code>maxAwaitTimeMS</code> (specified on
 the <code>ChangeStreamOptions</code> passed  to the method that created this change stream) before making another request.</p>

<p>A thread from the pool will be occupied by this method until it returns, so performance degradation is possible
 if the number of polling change streams is too close to the total number of threads in the thread pool. To
 configure the total number of threads in the pool, set the <code>ClientOptions.threadPoolSize</code> option on client
 creation.</p>

<p>If the result contains an error, it is likely one of the following:
     - <code>CommandError</code> if an error occurs while fetching more results from the server.
     - <code>LogicError</code> if this function is called after the change stream has died.
     - <code>LogicError</code> if this function is called and the session associated with this change stream is inactive.
     - <code>DecodingError</code> if an error occurs decoding the server&rsquo;s response.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">next</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Result</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">,</span> <span class="kt">Error</span><span class="o">&gt;</span><span class="p">?</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>A <code>Result&lt;T, Error&gt;?</code> containing the next <code>T</code> in this change stream or an error if one occurred, or <code>nil</code> if
the change stream is exhausted. This method will block until one of those conditions is met, potentially after
multiple requests to the server.</p>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/mongodb/mongo-swift-driver/tree/v1.0.0-rc0/Sources/MongoSwiftSync/ChangeStream.swift#L63-L72">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:14MongoSwiftSync12ChangeStreamC7tryNexts6ResultOyxs5Error_pGSgyF"></a>
                    <a name="//apple_ref/swift/Method/tryNext()" class="dashAnchor"></a>
                    <a class="token" href="#/s:14MongoSwiftSync12ChangeStreamC7tryNexts6ResultOyxs5Error_pGSgyF">tryNext()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Attempt to get the next <code>T</code> from this change stream, returning <code>nil</code> if there are no results.</p>

<p>The change stream will wait server-side for a maximum of <code>maxAwaitTimeMS</code> (specified on the
 <code>ChangeStreamOptions</code> passed to the method that created this change stream) before returning <code>nil</code>.</p>

<p>This method may be called repeatedly while <code>isAlive</code> is true to retrieve new data.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">tryNext</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Result</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">,</span> <span class="kt">Error</span><span class="o">&gt;</span><span class="p">?</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>A <code>Result&lt;T, Error&gt;?</code> containing the next <code>T</code> in this change stream, an error if one occurred, or <code>nil</code> if
there was no data.</p>

<p>If the result is an error, it is likely one of the following:</p>

<ul>
<li><code>CommandError</code> if an error occurs while fetching more results from the server.</li>
<li><code>LogicError</code> if this function is called after the change stream has died.</li>
<li><code>LogicError</code> if this function is called and the session associated with this change stream is inactive.</li>
<li><code>DecodingError</code> if an error occurs decoding the server&rsquo;s response.</li>
</ul>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/mongodb/mongo-swift-driver/tree/v1.0.0-rc0/Sources/MongoSwiftSync/ChangeStream.swift#L92-L101">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:14MongoSwiftSync12ChangeStreamC4killyyF"></a>
                    <a name="//apple_ref/swift/Method/kill()" class="dashAnchor"></a>
                    <a class="token" href="#/s:14MongoSwiftSync12ChangeStreamC4killyyF">kill()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Kill this change stream.</p>

<p>This method may be called from another thread safely even if this change stream is blocked retrieving results.
 This is mainly useful for freeing a thread that the change stream is blocking with a long running operation.</p>

<p>This method is automatically called in the <code>deinit</code> of <code>ChangeStream</code>, so it is not necessary to call it
 manually.</p>

<p>This method will have no effect if the change stream is already dead.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">kill</span><span class="p">()</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/mongodb/mongo-swift-driver/tree/v1.0.0-rc0/Sources/MongoSwiftSync/ChangeStream.swift#L114-L116">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>

      </article>
    </div>
    <section class="footer">
      <p>&copy; 2020 <a class="link" href="https://github.com/mongodb/mongo-swift-driver" target="_blank" rel="external">Matt Broadstone, Kaitlin Mahar, and Patrick Freed</a>. All rights reserved. (Last updated: 2020-02-27)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.0</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
